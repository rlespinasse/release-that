name: Release that
on: [push]
jobs:
  release-that-testing:
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        system:
          - semantic-release
          - lerna
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Test 'dry-run' parameter
        uses: ./
        with:
          system: ${{ matrix.system }}
          dry-run: true
      - name: Test 'without-prefix' parameter
        uses: ./
        with:
          system: ${{ matrix.system }}
          dry-run: true
          without-prefix: true

  release-that:
    runs-on: ubuntu-latest
    needs:
      - release-that-testing
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Release That
        uses: ./
